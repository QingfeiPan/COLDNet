---
title: "COLDNet Vignette"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Build Network

# Load in Data

```{r, results='hide'}
library(COLDNet)
# shiny::runApp(system.file("shiny", package = "visNetwork"))
test_net_dat <- COLDNet:::test_net
```

# Modify data to fit needs

```{r}
# Weights are non-negative, so take abs(rho)
test_net_dat$abs_rho <- abs(test_net_dat$rho)
test_net_dat$log_p <- -log10(test_net_dat$p_Bonferroni)

# required from and to columns!!!
colnames(test_net_dat) <- c("from", "to", "rho", "p_unadjusted", "p_Bonferroni", "abs_rho", "log_p")
```

# Build igraph + calculate layout

```{r}
# Takes in a dataframe, uses igraph to make a network, then ggraph to get plot parameters. 
# All this data is stored in the igraph object

test_net <- build_network(input = test_net_dat)

colnames(as_data_frame(test_net))

test_net <- plot_ggraph(input = test_net, color = "rho", width = "log_p")
```

# Build and Plot visNetwork

```{r}
# Takes in the igraph object and runs the shiny app!!

build_visnetwork(test_net)

## Changes!
# Zoom in functionality
# Fix data loading issue??
# Function to change color and width in shiny!
```
